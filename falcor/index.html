<html>
<head>
  <script src="node_modules/falcor/dist/falcor.browser.js"></script>
  <script>
    var $ref = falcor.Model.ref;
    var model = new falcor.Model({
      cache: {
        titlesById: {
          5212: {
            name: "Jessica Jones",
            rating: 4.5
          },
          2343: {
            name: "Daredevil",
            rating: 4
          }
        },
        genreList: [
          {
            name: "Recently Watched",
            titles: [
              $ref("titlesById[5212]"),
              $ref("titlesById[2343]")
            ]
          },
          {
            name: "New Releases",
            titles: [
              $ref("titlesById[5212]")
            ]
          }
        ]
      }
    });

    // model
    //   .getValue('genreList[0].titles[0].name')
    //   .then(function(value) {
    //     console.log(value);
    //   });
    //
    // model
    //   .get('genreList[0..1].titles[0].name')
    //   .then(function(json) {
    //     console.log(JSON.stringify(json, null, 4));
    //   });
    //
    // model
    //   .get('genreList[0..1].titles[0].name',
    //        'genreList[0..1].titles[0].rating')
    //   .then(function(json) {
    //     console.log(JSON.stringify(json, null, 4));
    //   });
    //
    // model
    //   .get('genreList[0..1].titles[0]["name", "rating"]')
    //   .then(function(json) {
    //     console.log(JSON.stringify(json, null, 4));
    //   });

    model
      .setValue('genreList[0].titles[0].rating', 5)
      .then(function(value) {
          model.get('genreList[0..1].titles[0].["name", "rating"]')
             .then(function(json) {
                console.log(JSON.stringify(json, null, 4));
             });
      });

  </script>
</head>
<body>
</body>
</html>
