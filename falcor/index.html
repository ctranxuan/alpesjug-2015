<html>
<head>
  <script src="node_modules/falcor/dist/falcor.browser.js"></script>
  <script>
  // Sentinels
  // $ref
  // $atom
  // $error
    var $ref = falcor.Model.ref;
    var $atom = falcor.Model.atom;
    var $error = falcor.Model.error;

    var model = new falcor.Model({source: new falcor.HttpDataSource('/model.json') });

    // var model = new falcor.Model({
    //   cache: {
    //     titlesById: {
    //       5212: {
    //         name: "Jessica Jones",
    //         rating: { $type: "atom", value: 5, $expires: -2000 },
    //         watched: true,
    //         bookmark: $error("Server is done"),
    //         subtitles: $atom["en", "fr"]
    //       },
    //       2343: {
    //         name: "Daredevil",
    //         rating: 4,
    //         watched: true,
    //         bookmark: null
    //       }
    //     },
    //     genreList: [
    //       {
    //         name: "Recently Watched",
    //         titles: [
    //           $ref("titlesById[5212]"),
    //           $ref("titlesById[2343]")
    //         ]
    //       },
    //       {
    //         name: "New Releases",
    //         titles: [
    //           $ref("titlesById[5212]")
    //         ]
    //       }
    //     ]
    //   }
    // });

    // model
    //   .getValue('genreList[0].titles[0].name')
    //   .then(function(value) {
    //     console.log(value);
    //   });
    //
    // model
    //   .get('genreList[0..1].titles[0].name')
    //   .then(function(json) {
    //     console.log(JSON.stringify(json, null, 4));
    //   });
    //
    // model
    //   .get('genreList[0..1].titles[0].name',
    //        'genreList[0..1].titles[0].rating')
    //   .then(function(json) {
    //     console.log(JSON.stringify(json, null, 4));
    //   });
    //
    // model
    //   .get('genreList[0..1].titles[0]["name", "rating"]')
    //   .then(function(json) {
    //     console.log(JSON.stringify(json, null, 4));
    //   });
    //
    // model
    //   .setValue('genreList[0].titles[0].rating', 5)
    //   .then(function(value) {
    //       // model.get('genreList[0..1].titles[0].["name", "rating"]')
    //       model.get(['genreList', { from: 0, to: 1 }, 'titles', 0, ["name", "rating"]])
    //          .then(function(json) {
    //             console.log(JSON.stringify(json, null, 4));
    //          });
    //   });

  //   model
  //     .getValue('genreList[0].titles[0].rating')
  //     .then(function(value) {
  //       console.log(value);
  //     });
  //
  // setTimeout(function() {
  //     model
  //     .getValue('genreList[0].titles[0].rating')
  //     .then(function(value) {
  //       console.log(value);
  //     });
  // }, 2500);

  // model.
  //   get("greeting").
  //   then(function(response) {
  //     // document.write(response.json.greeting);
  //     console.log(response);
  //   });

  model
    .get('genreList[0].titles[1].["name", "rating"]')
    .then(function(value) {
      console.log(JSON.stringify(value, null, 4));
    });

    model
      .getValue('genreList[0].titles[0].name')
      .then(function(value) {
        console.log(value);
      });

  </script>
</head>
<body>
</body>
</html>
